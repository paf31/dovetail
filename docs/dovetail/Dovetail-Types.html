<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Dovetail.Types</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">dovetail-0.1.1.0: A PureScript interpreter with a Haskell FFI.</span><ul class="links" id="page-menu"><li><a href="src/Dovetail.Types.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Dovetail.Types</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Evaluation</a><ul><li><a href="#g:2">Value types</a></li><li><a href="#g:3">Evaluation monad</a></li><li><a href="#g:4">Evaluation errors</a></li><li><a href="#g:5">Evaluation contexts</a><ul><li><a href="#g:6">Stack frames</a></li></ul></li></ul></li><li><a href="#g:7">Debugging</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Value">Value</a> ctx<ul class="subs"><li>= <a href="#v:Object">Object</a> (<a href="../unordered-containers-0.2.13.0/Data-HashMap-Strict.html#t:HashMap" title="Data.HashMap.Strict">HashMap</a> <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx))</li><li>| <a href="#v:Array">Array</a> (<a href="../vector-0.12.1.2/Data-Vector.html#t:Vector" title="Data.Vector">Vector</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx))</li><li>| <a href="#v:String">String</a> <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a></li><li>| <a href="#v:Char">Char</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Char" title="Distribution.Compat.Prelude.Internal">Char</a></li><li>| <a href="#v:Number">Number</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Double" title="Distribution.Compat.Prelude.Internal">Double</a></li><li>| <a href="#v:Int">Int</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a></li><li>| <a href="#v:Bool">Bool</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li>| <a href="#v:Closure">Closure</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx))</li><li>| <a href="#v:Constructor">Constructor</a> (ProperName 'ConstructorName) [<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx]</li><li>| <a href="#v:Foreign">Foreign</a> <a href="../base-4.14.1.0/Data-Dynamic.html#t:Dynamic" title="Data.Dynamic">Dynamic</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Env">Env</a> ctx</li><li class="src short"><a href="#v:lookupEnv">lookupEnv</a> :: Qualified Ident -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx)</li><li class="src short"><a href="#v:envNames">envNames</a> :: <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Set" title="Distribution.Compat.Prelude.Internal">Set</a> (Qualified Ident)</li><li class="src short"><a href="#v:envToMap">envToMap</a> :: <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Map" title="Distribution.Compat.Prelude.Internal">Map</a> (Qualified Ident) (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx)</li><li class="src short"><a href="#v:envFromMap">envFromMap</a> :: <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Map" title="Distribution.Compat.Prelude.Internal">Map</a> (Qualified Ident) (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx) -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx</li><li class="src short"><a href="#v:bindEnv">bindEnv</a> :: [(Qualified Ident, <a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx)] -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Eval">Eval</a> ctx a = <a href="#v:Eval">Eval</a> {<ul class="subs"><li><a href="#v:unEval">unEval</a> :: <a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx) (<a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> (<a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx) <a href="../base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a>) a</li></ul>}</li><li class="src short"><a href="#v:runEval">runEval</a> :: ctx -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="../base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> (<a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx) a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:EvaluationError">EvaluationError</a> ctx = <a href="#v:EvaluationError">EvaluationError</a> {<ul class="subs"><li><a href="#v:errorType">errorType</a> :: <a href="Dovetail-Types.html#t:EvaluationErrorType" title="Dovetail.Types">EvaluationErrorType</a> ctx</li><li><a href="#v:errorContext">errorContext</a> :: <a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:EvaluationErrorType">EvaluationErrorType</a> ctx<ul class="subs"><li>= <a href="#v:UnknownIdent">UnknownIdent</a> (Qualified Ident)</li><li>| <a href="#v:TypeMismatch">TypeMismatch</a> <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx)</li><li>| <a href="#v:FieldNotFound">FieldNotFound</a> <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx)</li><li>| <a href="#v:InexhaustivePatternMatch">InexhaustivePatternMatch</a> [<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx]</li><li>| <a href="#v:InvalidNumberOfArguments">InvalidNumberOfArguments</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a></li><li>| <a href="#v:UnsaturatedConstructorApplication">UnsaturatedConstructorApplication</a></li><li>| <a href="#v:InvalidFieldName">InvalidFieldName</a> PSString</li><li>| <a href="#v:OtherError">OtherError</a> <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a></li></ul></li><li class="src short"><a href="#v:renderEvaluationError">renderEvaluationError</a> :: <a href="Dovetail-Types.html#t:RenderValueOptions" title="Dovetail.Types">RenderValueOptions</a> -&gt; <a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx -&gt; <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a></li><li class="src short"><a href="#v:renderEvaluationErrorType">renderEvaluationErrorType</a> :: <a href="Dovetail-Types.html#t:RenderValueOptions" title="Dovetail.Types">RenderValueOptions</a> -&gt; <a href="Dovetail-Types.html#t:EvaluationErrorType" title="Dovetail.Types">EvaluationErrorType</a> ctx -&gt; <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:EvaluationContext">EvaluationContext</a> ctx = <a href="#v:EvaluationContext">EvaluationContext</a> {<ul class="subs"><li><a href="#v:callStack">callStack</a> :: [<a href="Dovetail-Types.html#t:EvaluationStackFrame" title="Dovetail.Types">EvaluationStackFrame</a> ctx]</li><li><a href="#v:additionalContext">additionalContext</a> :: ctx</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:EvaluationStackFrame">EvaluationStackFrame</a> ctx = <a href="#v:EvaluationStackFrame">EvaluationStackFrame</a> {<ul class="subs"><li><a href="#v:frameEnv">frameEnv</a> :: <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx</li><li><a href="#v:frameSource">frameSource</a> :: SourceSpan</li><li><a href="#v:frameExpr">frameExpr</a> :: <a href="Dovetail.html#t:Expr" title="Dovetail">Expr</a> <a href="Dovetail.html#t:Ann" title="Dovetail">Ann</a></li></ul>}</li><li class="src short"><a href="#v:pushStackFrame">pushStackFrame</a> :: <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="Dovetail.html#t:Expr" title="Dovetail">Expr</a> <a href="Dovetail.html#t:Ann" title="Dovetail">Ann</a> -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a</li><li class="src short"><a href="#v:throwErrorWithContext">throwErrorWithContext</a> :: (<a href="../mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> (<a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> x) m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> x) m) =&gt; <a href="Dovetail-Types.html#t:EvaluationErrorType" title="Dovetail.Types">EvaluationErrorType</a> x -&gt; m a</li><li class="src short"><a href="#v:renderEvaluationStack">renderEvaluationStack</a> :: [<a href="Dovetail-Types.html#t:EvaluationStackFrame" title="Dovetail.Types">EvaluationStackFrame</a> ctx] -&gt; <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a></li><li class="src short"><a href="#v:renderValue">renderValue</a> :: <a href="Dovetail-Types.html#t:RenderValueOptions" title="Dovetail.Types">RenderValueOptions</a> -&gt; <a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx -&gt; <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:RenderValueOptions">RenderValueOptions</a> = <a href="#v:RenderValueOptions">RenderValueOptions</a> {<ul class="subs"><li><a href="#v:colorOutput">colorOutput</a> :: <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li><a href="#v:maximumDepth">maximumDepth</a> :: <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a></li></ul>}</li><li class="src short"><a href="#v:defaultTerminalRenderValueOptions">defaultTerminalRenderValueOptions</a> :: <a href="Dovetail-Types.html#t:RenderValueOptions" title="Dovetail.Types">RenderValueOptions</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Evaluation</h1></a><a href="#g:2" id="g:2"><h2>Value types</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Value" class="def">Value</a> ctx <a href="src/Dovetail.Types.html#Value" class="link">Source</a> <a href="#t:Value" class="selflink">#</a></p><div class="doc"><p>The representation of values used by the interpreter - essentially, the
 semantic domain for a simple untyped lambda calculus with records and ADTs.</p><p>Any additional side effects which might occur in FFI calls to Haskell code
 are tracked by a monad in the type argument.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Object" class="def">Object</a> (<a href="../unordered-containers-0.2.13.0/Data-HashMap-Strict.html#t:HashMap" title="Data.HashMap.Strict">HashMap</a> <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx))</td><td class="doc"><p>Records are represented as hashmaps from their field names to values</p></td></tr><tr><td class="src"><a id="v:Array" class="def">Array</a> (<a href="../vector-0.12.1.2/Data-Vector.html#t:Vector" title="Data.Vector">Vector</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx))</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:String" class="def">String</a> <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Char" class="def">Char</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Char" title="Distribution.Compat.Prelude.Internal">Char</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Number" class="def">Number</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Double" title="Distribution.Compat.Prelude.Internal">Double</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Int" class="def">Int</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Bool" class="def">Bool</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Closure" class="def">Closure</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx))</td><td class="doc"><p>Closures, represented in higher-order abstract syntax style.</p></td></tr><tr><td class="src"><a id="v:Constructor" class="def">Constructor</a> (ProperName 'ConstructorName) [<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx]</td><td class="doc"><p>Fully-applied data constructors</p></td></tr><tr><td class="src"><a id="v:Foreign" class="def">Foreign</a> <a href="../base-4.14.1.0/Data-Dynamic.html#t:Dynamic" title="Data.Dynamic">Dynamic</a></td><td class="doc"><p>Foreign data types</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Value">Instances</h4><details id="i:Value" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Value:ToValue:1"></span> ctx ~ ctx' =&gt; <a href="Dovetail-Evaluate.html#t:ToValue" title="Dovetail.Evaluate">ToValue</a> ctx (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx')</span> <a href="src/Dovetail.Evaluate.html#line-360" class="link">Source</a> <a href="#t:ToValue" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Value:ToValue:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Evaluate.html">Dovetail.Evaluate</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toValue">toValue</a> :: <a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx' -&gt; <a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx <a href="src/Dovetail.Evaluate.html#toValue" class="link">Source</a> <a href="#v:toValue" class="selflink">#</a></p><p class="src"><a href="#v:fromValue">fromValue</a> :: <a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx') <a href="src/Dovetail.Evaluate.html#fromValue" class="link">Source</a> <a href="#v:fromValue" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:3" id="g:3"><h2>Evaluation monad</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Env" class="def">Env</a> ctx <a href="src/Dovetail.Types.html#Env" class="link">Source</a> <a href="#t:Env" class="selflink">#</a></p><div class="doc"><p>An environment, i.e. a mapping from names to evaluated values.</p><p>An environment for a single built-in function can be constructed
 using the <code>builtIn</code> function, and environments can be combined
 easily using the <code><a href="../Cabal-3.2.1.0/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a></code> instance for <code><a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Map" title="Distribution.Compat.Prelude.Internal">Map</a></code>.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Env">Instances</h4><details id="i:Env" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Env:Semigroup:1"></span> <a href="../Cabal-3.2.1.0/Distribution-Compat-Semigroup.html#t:Semigroup" title="Distribution.Compat.Semigroup">Semigroup</a> (<a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx)</span> <a href="src/Dovetail.Types.html#line-172" class="link">Source</a> <a href="#t:Env" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Env:Semigroup:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Types.html">Dovetail.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> (<a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx) -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integral" title="Distribution.Compat.Prelude.Internal">Integral</a> b =&gt; b -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Env:Monoid:2"></span> <a href="../Cabal-3.2.1.0/Distribution-Compat-Semigroup.html#t:Monoid" title="Distribution.Compat.Semigroup">Monoid</a> (<a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx)</span> <a href="src/Dovetail.Types.html#line-172" class="link">Source</a> <a href="#t:Env" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Env:Monoid:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Types.html">Dovetail.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx] -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:lookupEnv" class="def">lookupEnv</a> :: Qualified Ident -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx) <a href="src/Dovetail.Types.html#lookupEnv" class="link">Source</a> <a href="#v:lookupEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:envNames" class="def">envNames</a> :: <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Set" title="Distribution.Compat.Prelude.Internal">Set</a> (Qualified Ident) <a href="src/Dovetail.Types.html#envNames" class="link">Source</a> <a href="#v:envNames" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:envToMap" class="def">envToMap</a> :: <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Map" title="Distribution.Compat.Prelude.Internal">Map</a> (Qualified Ident) (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx) <a href="src/Dovetail.Types.html#envToMap" class="link">Source</a> <a href="#v:envToMap" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:envFromMap" class="def">envFromMap</a> :: <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Map" title="Distribution.Compat.Prelude.Internal">Map</a> (Qualified Ident) (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx) -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx <a href="src/Dovetail.Types.html#envFromMap" class="link">Source</a> <a href="#v:envFromMap" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:bindEnv" class="def">bindEnv</a> :: [(Qualified Ident, <a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx)] -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx <a href="src/Dovetail.Types.html#bindEnv" class="link">Source</a> <a href="#v:bindEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Eval" class="def">Eval</a> ctx a <a href="src/Dovetail.Types.html#Eval" class="link">Source</a> <a href="#t:Eval" class="selflink">#</a></p><div class="doc"><p>The monad used by the interpreter, which supports error reporting for errors
 which can occur during evaluation.</p><p>The transformed monad is used to track any benign side effects that might be
 exposed via the foreign function interface to PureScript code.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Eval" class="def">Eval</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unEval" class="def">unEval</a> :: <a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx) (<a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> (<a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx) <a href="../base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a>) a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Eval">Instances</h4><details id="i:Eval" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eval:ToValueRHS:1"></span> (<a href="Dovetail-Evaluate.html#t:ToValue" title="Dovetail.Evaluate">ToValue</a> ctx a, ctx ~ ctx') =&gt; <a href="Dovetail-Evaluate.html#t:ToValueRHS" title="Dovetail.Evaluate">ToValueRHS</a> ctx (<a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx' a)</span> <a href="src/Dovetail.Evaluate.html#line-488" class="link">Source</a> <a href="#t:ToValueRHS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eval:ToValueRHS:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Evaluate.html">Dovetail.Evaluate</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toValueRHS">toValueRHS</a> :: <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx' a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx) <a href="src/Dovetail.Evaluate.html#toValueRHS" class="link">Source</a> <a href="#v:toValueRHS" class="selflink">#</a></p><p class="src"><a href="#v:fromValueRHS">fromValueRHS</a> :: <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx' a <a href="src/Dovetail.Evaluate.html#fromValueRHS" class="link">Source</a> <a href="#v:fromValueRHS" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eval:Monad:2"></span> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Monad" title="Distribution.Compat.Prelude.Internal">Monad</a> (<a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx)</span> <a href="src/Dovetail.Types.html#line-249" class="link">Source</a> <a href="#t:Eval" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eval:Monad:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Types.html">Dovetail.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; (a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx b) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx b -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eval:Functor:3"></span> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Functor" title="Distribution.Compat.Prelude.Internal">Functor</a> (<a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx)</span> <a href="src/Dovetail.Types.html#line-247" class="link">Source</a> <a href="#t:Eval" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eval:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Types.html">Dovetail.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx b -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eval:MonadFix:4"></span> <a href="../base-4.14.1.0/Control-Monad-Fix.html#t:MonadFix" title="Control.Monad.Fix">MonadFix</a> (<a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx)</span> <a href="src/Dovetail.Types.html#line-253" class="link">Source</a> <a href="#t:Eval" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eval:MonadFix:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Types.html">Dovetail.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mfix">mfix</a> :: (a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:mfix" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eval:Applicative:5"></span> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Applicative" title="Distribution.Compat.Prelude.Internal">Applicative</a> (<a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx)</span> <a href="src/Dovetail.Types.html#line-248" class="link">Source</a> <a href="#t:Eval" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eval:Applicative:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Types.html">Dovetail.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx (a -&gt; b) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx b -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx b -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx b -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eval:MonadIO:6"></span> <a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> (<a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx)</span> <a href="src/Dovetail.Types.html#line-252" class="link">Source</a> <a href="#t:Eval" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eval:MonadIO:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Types.html">Dovetail.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftIO">liftIO</a> :: <a href="../base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:liftIO" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eval:MonadError:7"></span> <a href="../mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> (<a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx) (<a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx)</span> <a href="src/Dovetail.Types.html#line-250" class="link">Source</a> <a href="#t:Eval" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eval:MonadError:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Types.html">Dovetail.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:throwError">throwError</a> :: <a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:throwError" class="selflink">#</a></p><p class="src"><a href="#v:catchError">catchError</a> :: <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; (<a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:catchError" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eval:MonadReader:8"></span> <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx) (<a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx)</span> <a href="src/Dovetail.Types.html#line-251" class="link">Source</a> <a href="#t:Eval" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eval:MonadReader:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Types.html">Dovetail.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ask">ask</a> :: <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx) <a href="#v:ask" class="selflink">#</a></p><p class="src"><a href="#v:local">local</a> :: (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx -&gt; <a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:local" class="selflink">#</a></p><p class="src"><a href="#v:reader">reader</a> :: (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx -&gt; a) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:reader" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:runEval" class="def">runEval</a> :: ctx -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="../base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> (<a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx) a) <a href="src/Dovetail.Types.html#runEval" class="link">Source</a> <a href="#v:runEval" class="selflink">#</a></p></div><a href="#g:4" id="g:4"><h2>Evaluation errors</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:EvaluationError" class="def">EvaluationError</a> ctx <a href="src/Dovetail.Types.html#EvaluationError" class="link">Source</a> <a href="#t:EvaluationError" class="selflink">#</a></p><div class="doc"><p>An evaluation error containing the evaluation context at the point the
 error was raised.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:EvaluationError" class="def">EvaluationError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:errorType" class="def">errorType</a> :: <a href="Dovetail-Types.html#t:EvaluationErrorType" title="Dovetail.Types">EvaluationErrorType</a> ctx</dfn><div class="doc"><p>The type of error which was raised</p></div></li><li><dfn class="src"><a id="v:errorContext" class="def">errorContext</a> :: <a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx</dfn><div class="doc"><p>The evaluation context at the point the error was raised.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:EvaluationError">Instances</h4><details id="i:EvaluationError" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EvaluationError:MonadError:1"></span> <a href="../mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> (<a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx) (<a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx)</span> <a href="src/Dovetail.Types.html#line-250" class="link">Source</a> <a href="#t:EvaluationError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EvaluationError:MonadError:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Types.html">Dovetail.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:throwError">throwError</a> :: <a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:throwError" class="selflink">#</a></p><p class="src"><a href="#v:catchError">catchError</a> :: <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; (<a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:catchError" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:EvaluationErrorType" class="def">EvaluationErrorType</a> ctx <a href="src/Dovetail.Types.html#EvaluationErrorType" class="link">Source</a> <a href="#t:EvaluationErrorType" class="selflink">#</a></p><div class="doc"><p>Errors which can occur during evaluation of PureScript code.</p><p>PureScript is a typed language, and tries to prevent runtime errors.
 However, in the context of this interpreter, we can receive data from outside
 PureScript code, so it is possible that runtime errors can occur if we are
 not careful. This is similar to how PureScript code can fail at runtime
 due to errors in the FFI.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:UnknownIdent" class="def">UnknownIdent</a> (Qualified Ident)</td><td class="doc"><p>A name was not found in the environment</p></td></tr><tr><td class="src"><a id="v:TypeMismatch" class="def">TypeMismatch</a> <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx)</td><td class="doc"><p>The runtime representation of a value did not match the expected
 representation</p></td></tr><tr><td class="src"><a id="v:FieldNotFound" class="def">FieldNotFound</a> <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a> (<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx)</td><td class="doc"><p>A record field did not exist in an <code><a href="Dovetail-Types.html#v:Object" title="Dovetail.Types">Object</a></code> value.</p></td></tr><tr><td class="src"><a id="v:InexhaustivePatternMatch" class="def">InexhaustivePatternMatch</a> [<a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx]</td><td class="doc"><p>A pattern match failed to match its argument</p></td></tr><tr><td class="src"><a id="v:InvalidNumberOfArguments" class="def">InvalidNumberOfArguments</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a></td><td class="doc"><p>A pattern match received the wrong number of arguments</p></td></tr><tr><td class="src"><a id="v:UnsaturatedConstructorApplication" class="def">UnsaturatedConstructorApplication</a></td><td class="doc"><p>A pattern match occurred against a partially-applied data constructor</p></td></tr><tr><td class="src"><a id="v:InvalidFieldName" class="def">InvalidFieldName</a> PSString</td><td class="doc"><p>A PureScript string which contains lone surrogates which could not be
 decoded. See <code>PSString</code>.</p></td></tr><tr><td class="src"><a id="v:OtherError" class="def">OtherError</a> <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a></td><td class="doc"><p>An error occurred in a foreign function which is not tracked by
 any of the other error types.</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:renderEvaluationError" class="def">renderEvaluationError</a> :: <a href="Dovetail-Types.html#t:RenderValueOptions" title="Dovetail.Types">RenderValueOptions</a> -&gt; <a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> ctx -&gt; <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="src/Dovetail.Types.html#renderEvaluationError" class="link">Source</a> <a href="#v:renderEvaluationError" class="selflink">#</a></p><div class="doc"><p>Render an <code><a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a></code> as a human-readable string.</p></div></div><div class="top"><p class="src"><a id="v:renderEvaluationErrorType" class="def">renderEvaluationErrorType</a> :: <a href="Dovetail-Types.html#t:RenderValueOptions" title="Dovetail.Types">RenderValueOptions</a> -&gt; <a href="Dovetail-Types.html#t:EvaluationErrorType" title="Dovetail.Types">EvaluationErrorType</a> ctx -&gt; <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="src/Dovetail.Types.html#renderEvaluationErrorType" class="link">Source</a> <a href="#v:renderEvaluationErrorType" class="selflink">#</a></p></div><a href="#g:5" id="g:5"><h2>Evaluation contexts</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:EvaluationContext" class="def">EvaluationContext</a> ctx <a href="src/Dovetail.Types.html#EvaluationContext" class="link">Source</a> <a href="#t:EvaluationContext" class="selflink">#</a></p><div class="doc"><p>An evaluation context currently consists of an evaluation stack, which
 is only used for debugging purposes, plus any other domain-specific context
 of type <code>ctx</code>.</p><p>The context type is parameterized by a monad <code>m</code>, because stack frames can
 contain environments, which can in turn contain <code><a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a></code>s, which may contain
 monadic closures. This can be useful for inspecting values or resuming execution
 in the event of an error.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:EvaluationContext" class="def">EvaluationContext</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:callStack" class="def">callStack</a> :: [<a href="Dovetail-Types.html#t:EvaluationStackFrame" title="Dovetail.Types">EvaluationStackFrame</a> ctx]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:additionalContext" class="def">additionalContext</a> :: ctx</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:EvaluationContext">Instances</h4><details id="i:EvaluationContext" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EvaluationContext:MonadReader:1"></span> <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx) (<a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx)</span> <a href="src/Dovetail.Types.html#line-251" class="link">Source</a> <a href="#t:EvaluationContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EvaluationContext:MonadReader:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Dovetail-Types.html">Dovetail.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ask">ask</a> :: <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx) <a href="#v:ask" class="selflink">#</a></p><p class="src"><a href="#v:local">local</a> :: (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx -&gt; <a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:local" class="selflink">#</a></p><p class="src"><a href="#v:reader">reader</a> :: (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> ctx -&gt; a) -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="#v:reader" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:6" id="g:6"><h3>Stack frames</h3></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:EvaluationStackFrame" class="def">EvaluationStackFrame</a> ctx <a href="src/Dovetail.Types.html#EvaluationStackFrame" class="link">Source</a> <a href="#t:EvaluationStackFrame" class="selflink">#</a></p><div class="doc"><p>A single evaluation stack frame
 TODO: support frames for foreign function calls</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:EvaluationStackFrame" class="def">EvaluationStackFrame</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:frameEnv" class="def">frameEnv</a> :: <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx</dfn><div class="doc"><p>The current environment in this stack frame </p></div></li><li><dfn class="src"><a id="v:frameSource" class="def">frameSource</a> :: SourceSpan</dfn><div class="doc"><p>The source span of the expression whose evaluation created this stack frame.</p></div></li><li><dfn class="src"><a id="v:frameExpr" class="def">frameExpr</a> :: <a href="Dovetail.html#t:Expr" title="Dovetail">Expr</a> <a href="Dovetail.html#t:Ann" title="Dovetail">Ann</a></dfn><div class="doc"><p>The expression whose evaluation created this stack frame.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:pushStackFrame" class="def">pushStackFrame</a> :: <a href="Dovetail-Types.html#t:Env" title="Dovetail.Types">Env</a> ctx -&gt; <a href="Dovetail.html#t:Expr" title="Dovetail">Expr</a> <a href="Dovetail.html#t:Ann" title="Dovetail">Ann</a> -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a -&gt; <a href="Dovetail-Types.html#t:Eval" title="Dovetail.Types">Eval</a> ctx a <a href="src/Dovetail.Types.html#pushStackFrame" class="link">Source</a> <a href="#v:pushStackFrame" class="selflink">#</a></p><div class="doc"><p>Create a stack frame for the evaluation of an expression, and push it onto
 the stack.</p></div></div><div class="top"><p class="src"><a id="v:throwErrorWithContext" class="def">throwErrorWithContext</a> :: (<a href="../mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> (<a href="Dovetail-Types.html#t:EvaluationError" title="Dovetail.Types">EvaluationError</a> x) m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> (<a href="Dovetail-Types.html#t:EvaluationContext" title="Dovetail.Types">EvaluationContext</a> x) m) =&gt; <a href="Dovetail-Types.html#t:EvaluationErrorType" title="Dovetail.Types">EvaluationErrorType</a> x -&gt; m a <a href="src/Dovetail.Types.html#throwErrorWithContext" class="link">Source</a> <a href="#v:throwErrorWithContext" class="selflink">#</a></p><div class="doc"><p>Throw an error which captures the current execution context.</p></div></div><div class="top"><p class="src"><a id="v:renderEvaluationStack" class="def">renderEvaluationStack</a> :: [<a href="Dovetail-Types.html#t:EvaluationStackFrame" title="Dovetail.Types">EvaluationStackFrame</a> ctx] -&gt; <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a> <a href="src/Dovetail.Types.html#renderEvaluationStack" class="link">Source</a> <a href="#v:renderEvaluationStack" class="selflink">#</a></p></div><a href="#g:7" id="g:7"><h1>Debugging</h1></a><div class="top"><p class="src"><a id="v:renderValue" class="def">renderValue</a> :: <a href="Dovetail-Types.html#t:RenderValueOptions" title="Dovetail.Types">RenderValueOptions</a> -&gt; <a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a> ctx -&gt; <a href="../protolude-0.3.0/Protolude.html#t:Text" title="Protolude">Text</a> <a href="src/Dovetail.Types.html#renderValue" class="link">Source</a> <a href="#v:renderValue" class="selflink">#</a></p><div class="doc"><p>Render a <code><a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a></code> as human-readable text.</p><p>As a general rule, apart from any closures, the rendered text should evaluate
 to the value you started with (when <code><a href="Dovetail-Types.html#v:maximumDepth" title="Dovetail.Types">maximumDepth</a></code> is not set).</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RenderValueOptions" class="def">RenderValueOptions</a> <a href="src/Dovetail.Types.html#RenderValueOptions" class="link">Source</a> <a href="#t:RenderValueOptions" class="selflink">#</a></p><div class="doc"><p>Options when rendering values as strings using <code><a href="Dovetail-Types.html#v:renderValue" title="Dovetail.Types">renderValue</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RenderValueOptions" class="def">RenderValueOptions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:colorOutput" class="def">colorOutput</a> :: <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></dfn><div class="doc"><p>Should ANSI terminal color codes be emitted</p></div></li><li><dfn class="src"><a id="v:maximumDepth" class="def">maximumDepth</a> :: <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a></dfn><div class="doc"><p>The maximum depth of a subexpression to render, or <code><a href="../Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#v:Nothing" title="Distribution.Compat.Prelude.Internal">Nothing</a></code>
 to render the entire <code><a href="Dovetail-Types.html#t:Value" title="Dovetail.Types">Value</a></code>.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultTerminalRenderValueOptions" class="def">defaultTerminalRenderValueOptions</a> :: <a href="Dovetail-Types.html#t:RenderValueOptions" title="Dovetail.Types">RenderValueOptions</a> <a href="src/Dovetail.Types.html#defaultTerminalRenderValueOptions" class="link">Source</a> <a href="#v:defaultTerminalRenderValueOptions" class="selflink">#</a></p><div class="doc"><p>Some sensible default rendering options for use on a terminal
 which supports color.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>